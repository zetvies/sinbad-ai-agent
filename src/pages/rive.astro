---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import AIDialog from "../components/AIDialog.astro";

let text;
---

<Layout title="Rive Test">
  <div class="w-full h-[50svh] bg-cream flex justify-center pt-[8svh] relative">
    <video id="AhmedAnimation" class="w-full h-full">
      <source src="/thumbsup.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    <div
      id="AIDialogContainer"
      class={`opacity-0 transition-opacity duration-100 absolute bottom-4 left-auto right-auto z-[100] bg-white py-2 px-4 rounded-lg montserrat`}
    >
      <svg
        class="absolute bottom-[85%]"
        width="32"
        height="21"
        viewBox="0 0 32 21"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M25.8423 4.44478L11.5015 13.6319C8.13714 15.7871 9.6637 21 13.6592 21H28C30.2091 21 32 19.2091 32 17V7.81291C32 4.6511 28.5046 2.73921 25.8423 4.44478Z"
          fill="white"></path>
      </svg>
      <div id="AIDialogText"></div>
    </div>
  </div>
  <button
    onclick="playVid()"
    class="mt-10 bg-dark-green rounded-full flex font-medium text-white border-2 border-white justify-center items-center p-3"
  >
    Submit
  </button>
  <script is:inline>
    let vid = document.getElementById("AhmedAnimation");

    function playVid() {
      vid.play();
      document.getElementById("AIDialogContainer").style.opacity = 1;
      document.getElementById("AIDialogText").innerText =
        "Thank you for submitting!";
      setTimeout(() => {
        document.getElementById("AIDialogContainer").style.opacity = 0;
        document.getElementById("AIDialogText").innerText = "";
      }, 2500);
    }
  </script>

  <!-- <canvas id="canvas" width="500" height="500"></canvas>

  <script is:inline src="/scripts/rive.js"></script>
  <script is:inline>
    const r = new rive.Rive({
      src: "/thumbsup.riv",
      canvas: document.getElementById("canvas"),
      autoplay: true,
      stateMachines: "bumpy",
      onLoad: () => {
        r.resizeDrawingSurfaceToCanvas();
      },
    });
  </script> -->
</Layout>
